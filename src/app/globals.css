@tailwind base;
@tailwind components;
@tailwind utilities;
body { @apply bg-gray-50 text-gray-900; }
.container { @apply max-w-5xl mx-auto px-4; }
.card { @apply bg-white rounded-xl shadow p-5; }
.btn { @apply inline-flex items-center gap-2 rounded-lg border px-3 py-2 text-sm font-medium bg-black text-white hover:bg-gray-800 whitespace-nowrap transition-colors duration-150; }
/* Consistent, composable button primitives for precise sizing */
.btn-base { @apply inline-flex items-center justify-center gap-2 rounded-xl border border-gray-300 text-sm font-medium whitespace-nowrap select-none transition-colors duration-150; }
.btn-primary { @apply bg-black text-white hover:bg-gray-800; }
.btn-ghost { @apply bg-white text-gray-900 hover:bg-gray-50; }
.btn-md { @apply h-10 px-4; }
.btn-sm { @apply px-3 py-1.5 text-sm; }
.btn-square { @apply w-10 h-10 p-0; }
.btn-square-sm { @apply w-8 h-8 p-0; }
.btn-wide { @apply min-w-[120px]; }
.btn-lg { @apply px-4 py-2.5 rounded-xl text-sm; }
.btn-xs { @apply px-2 py-1 text-xs rounded-md; }
.input { @apply w-full border rounded-lg p-2; }
.input-lg { @apply p-3 rounded-xl; }
.link { @apply text-blue-600 hover:underline transition-colors duration-150; }
.table { @apply w-full text-sm; }
th, td { @apply border-b py-2 text-left; }
.badge { @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700; }
/* globals.css additions (optional sugar) */
/* .btn { @apply px-3 py-1.5 rounded-md border text-sm hover:bg-muted; } */
/* .btn-xs { @apply px-2 py-1 text-xs rounded border; } */
/* .input { @apply w-full px-3 py-1.5 border rounded-md bg-background; } */

/* Basic styling for react-jsonschema-form (rjsf) so controls are visible without a CSS framework */
.rjsf .field { @apply mb-4; }
.rjsf label { @apply block text-sm font-medium mb-1; }
.rjsf input[type="text"],
.rjsf input[type="email"],
.rjsf input[type="number"],
.rjsf input[type="date"],
.rjsf input[type="file"],
.rjsf select,
.rjsf textarea { @apply w-full border rounded-lg p-2 bg-white; border-color: theme('colors.gray.300'); }
.rjsf input[disabled],
.rjsf select[disabled],
.rjsf textarea[disabled] { @apply bg-gray-100 text-gray-500; }
.rjsf .help-block { @apply text-xs text-gray-500 mt-1; }
.rjsf .errors { @apply text-sm text-red-600 mt-1; }

/* ---- App-wide micro animations ---- */
/* Page transition: subtle fade + lift */
.page-fade-in { animation: pageFadeIn 200ms ease-out; will-change: opacity; }
@keyframes pageFadeIn { from { opacity: 0; } to { opacity: 1; } }

/* Modal overlay/content transitions */
.modal-overlay { animation: fadeIn 140ms ease-out both; will-change: opacity; }
.modal-shell { filter: drop-shadow(0 25px 50px rgba(0,0,0,.25)); }
.modal-content { border: 0; box-shadow: none !important; isolation: isolate; animation: none; will-change: auto; backface-visibility: hidden; }
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes contentEnter { from { opacity: 0; box-shadow: none; } to { opacity: 1; box-shadow: var(--modal-shadow); } }

/* Drawer transitions */
.drawer-overlay { animation: fadeIn 120ms ease-out both; will-change: opacity; }
.drawer-panel { animation: slideInRight 200ms cubic-bezier(0.22, 1, 0.36, 1) both; will-change: transform, opacity; backface-visibility: hidden; }
@keyframes slideInRight {
  from { opacity: 0; transform: translateX(12px); }
  to { opacity: 1; transform: translateX(0); }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .page-fade-in,
  .modal-overlay,
  .modal-content,
  .drawer-overlay,
  .drawer-panel {
    animation: none !important;
  }
  .btn, .btn-base, .link { transition: none !important; }
}

/* Tab/content switches (lightweight fade) */
.tab-animate { animation: tabFade 150ms ease-out; will-change: opacity; }
@keyframes tabFade { from { opacity: 0; } to { opacity: 1; } }

/* List item add animation (filters, pills, etc.) */
.list-animate { animation: listIn 140ms ease-out; will-change: opacity, transform; }
@keyframes listIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

/* Swap regions (charts/tables/results) */
.swap-animate { animation: swapIn 160ms ease-out; will-change: opacity; }
@keyframes swapIn { from { opacity: 0; } to { opacity: 1; } }

/* Chat message entry */
.msg-animate { animation: msgIn 140ms ease-out; will-change: opacity, transform; }
@keyframes msgIn { from { opacity: 0; transform: translateY(3px); } to { opacity: 1; transform: translateY(0); } }

/* ---- Chart Animations ---- */
.chart-barh-fill { animation: growWidth 420ms cubic-bezier(0.22, 1, 0.36, 1) both; will-change: width; }
@keyframes growWidth { from { width: 0; } to { width: var(--w, 100%); } }

.chart-barv-fill { animation: growHeight 420ms cubic-bezier(0.22, 1, 0.36, 1) both; will-change: height; }
@keyframes growHeight { from { height: 0; } to { height: var(--h, 100%); } }

.chart-pie { animation: pieIn 520ms cubic-bezier(0.22, 1, 0.36, 1) both; will-change: transform, opacity; transform-origin: 50% 50%; }
@keyframes pieIn { from { opacity: 0; transform: scale(0.92) rotate(-6deg); } to { opacity: 1; transform: scale(1) rotate(0); } }

.chart-kpi { animation: swapIn 200ms ease-out both; }

/* Reduced motion: disable chart animations */
@media (prefers-reduced-motion: reduce) {
  .chart-barh-fill,
  .chart-barv-fill,
  .chart-pie,
  .chart-kpi { animation: none !important; }
}

/* spark-frame removed */
